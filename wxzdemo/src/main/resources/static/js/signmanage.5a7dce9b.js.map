{"version":3,"sources":["webpack:///./src/utils/timeFormat.js","webpack:///./src/views/Sign/SignManage.vue?5a00","webpack:///src/views/Sign/SignManage.vue","webpack:///./src/views/Sign/SignManage.vue?5f68","webpack:///./src/views/Sign/SignManage.vue"],"names":["timeFormat","time","d","Date","substr","year","getFullYear","month","getMonth","day","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","clock","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","Sign","json_fields","_v","slice","curPage","pageSize","value","length","on","$event","staticRenderFns","component"],"mappings":"8GAAO,SAASA,EAAWC,GACvB,IAAIC,EAAI,IAAIC,KAAKF,EAAKG,OAAO,EAAG,KAC5BC,EAAOH,EAAEI,cACTC,EAAQL,EAAEM,WAAa,EACvBC,EAAMP,EAAEQ,UAERC,EAAKT,EAAEU,WAAW,EAClBC,EAAKX,EAAEY,aACPC,EAAKb,EAAEc,aAEPC,EAAQZ,EAAO,IAqBnB,OAnBIE,EAAQ,KACRU,GAAS,KAEbA,GAASV,EAAQ,IAEbE,EAAM,KACNQ,GAAS,KAEbA,GAASR,EAAM,IAEXE,EAAK,KACLM,GAAS,KAEbA,GAASN,EAAK,IACVE,EAAK,KAAII,GAAS,KACtBA,GAASJ,EAAK,IAEVE,EAAK,KAAIE,GAAS,KACtBA,GAASF,EACDE,EA/BZ,mC,yCCAA,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,iBAAiB,CAACE,YAAY,uBAAuBC,YAAY,CAAC,MAAQ,QAAQ,OAAS,OAAO,OAAS,sBAAsBC,MAAM,CAAC,KAAOR,EAAIS,KAAK,OAAST,EAAIU,YAAY,KAAO,aAAa,CAACN,EAAG,YAAY,CAACG,YAAY,CAAC,MAAQ,QAAQ,OAAS,QAAQC,MAAM,CAAC,KAAO,UAAU,KAAO,UAAU,CAACR,EAAIW,GAAG,cAAc,GAAGP,EAAG,WAAW,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,KAAOR,EAAIS,KAAKG,OAAOZ,EAAIa,QAAU,GAAGb,EAAIc,SAASd,EAAIa,QAAQb,EAAIc,UAAU,OAAS,KAAK,CAACV,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,KAAK,MAAQ,OAAO,MAAQ,SAASJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,cAAc,MAAQ,OAAO,MAAQ,SAASJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,YAAY,MAAQ,OAAO,MAAQ,QAAQJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,kBAAkB,MAAQ,OAAO,MAAQ,SAASJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,WAAW,MAAQ,OAAO,MAAQ,SAASJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,SAAS,MAAQ,OAAO,MAAQ,UAAU,GAAGJ,EAAG,gBAAgB,CAACG,YAAY,CAAC,aAAa,QAAQC,MAAM,CAAC,WAAa,GAAG,eAAeR,EAAIa,QAAQ,sBAAsBb,EAAIe,MAAM,YAAYf,EAAIc,SAAS,OAAS,mCAAmC,MAAQd,EAAIS,KAAKO,QAAQC,GAAG,CAAC,qBAAqB,SAASC,GAAQlB,EAAIa,QAAQK,GAAQ,sBAAsB,SAASA,GAAQlB,EAAIa,QAAQK,OAAY,IAC/5CC,EAAkB,G,oCCsEtB,GACE,KAAF,aACE,QAFF,WAGA,oCACA,uCAKM,KAAN,cAAQ,KAAR,MAEI,KAAJ,WAEE,KAbF,WAcI,MAAJ,CACM,OAAN,EACM,SAAN,EACM,QAAN,EACM,KAAN,EACM,KAAN,EACM,KAAN,GACM,YAAN,CACQ,GAAR,KACQ,KAAR,YACQ,KAAR,cACQ,KAAR,kBACQ,OAAR,WACQ,OAAR,YAIE,QAAF,CACI,QADJ,WAEM,IAAN,OACM,OAAN,OAAM,GAAN,kBACQ,EAAR,YACQ,IAAR,4BACU,EAAV,uDAEA,mBACA,aACU,EAAV,UAAY,KAAZ,QAAY,QAAZ,YAAY,WAAZ,UChHmW,I,YCO/VC,EAAY,eACd,EACArB,EACAoB,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/signmanage.5a7dce9b.js","sourcesContent":["export function timeFormat(time){\r\n    let d = new Date(time.substr(0, 19));//加入substr(0, 19)处理兼容ios报错NAN\r\n    let year = d.getFullYear();       //年\r\n    let month = d.getMonth() + 1;     //月\r\n    let day = d.getDate();            //日\r\n\r\n    var hh = d.getHours()+8;            //时,+8转北京时间\r\n    var mm = d.getMinutes();          //分\r\n    var ss = d.getSeconds();           //秒\r\n\r\n    let clock = year + \"-\";\r\n\r\n    if (month < 10)\r\n        clock += \"0\";\r\n\r\n    clock += month + \"-\";\r\n\r\n    if (day < 10)\r\n        clock += \"0\";\r\n\r\n    clock += day + \" \";\r\n\r\n    if (hh < 10)\r\n        clock += \"0\";\r\n\r\n    clock += hh + \":\";\r\n    if (mm < 10) clock += '0';\r\n    clock += mm + \":\";\r\n\r\n    if (ss < 10) clock += '0';\r\n    clock += ss;\r\n    return (clock);\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"SignManage\"},[_c('download-excel',{staticClass:\"export-excel-wrapper\",staticStyle:{\"width\":\"100px\",\"height\":\"40px\",\"margin\":\"15px 15px 15px 0px\"},attrs:{\"data\":_vm.Sign,\"fields\":_vm.json_fields,\"name\":\"签到详情.xls\"}},[_c('el-button',{staticStyle:{\"width\":\"100px\",\"height\":\"40px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"导出EXCEL\")])],1),_c('el-table',{staticStyle:{\"width\":\"800px\"},attrs:{\"data\":_vm.Sign.slice((_vm.curPage - 1)*_vm.pageSize,_vm.curPage*_vm.pageSize),\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"签到序号\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"user.number\",\"label\":\"用户账号\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"user.name\",\"label\":\"用户姓名\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"prop\":\"user.clbum.name\",\"label\":\"所属班级\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"signtime\",\"label\":\"签到时间\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":\"打卡备注\",\"width\":\"120\"}})],1),_c('el-pagination',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"background\":\"\",\"current-page\":_vm.curPage,\"hide-on-single-page\":_vm.value,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.Sign.length},on:{\"update:currentPage\":function($event){_vm.curPage=$event},\"update:current-page\":function($event){_vm.curPage=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"SignManage\">\r\n        <download-excel\r\n                class = \"export-excel-wrapper\"\r\n                :data = \"Sign\"\r\n                :fields = \"json_fields\"\r\n                name = \"签到详情.xls\"\r\n                style=\"width:100px;height:40px;margin:15px 15px 15px 0px;\">\r\n            <el-button\r\n                    type=\"primary\"\r\n                    size=\"small\"\r\n                    style=\"width:100px;height:40px;\">导出EXCEL</el-button>\r\n        </download-excel>\r\n        <el-table\r\n                :data=\"Sign.slice((curPage - 1)*pageSize,curPage*pageSize)\"\r\n                border\r\n                style=\"width: 800px\">\r\n            <el-table-column\r\n                    prop=\"id\"\r\n                    label=\"签到序号\"\r\n                    width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"user.number\"\r\n                    label=\"用户账号\"\r\n                    width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"user.name\"\r\n                    label=\"用户姓名\"\r\n                    width=\"80\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"user.clbum.name\"\r\n                    label=\"所属班级\"\r\n                    width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"signtime\"\r\n                    label=\"签到时间\"\r\n                    width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"remark\"\r\n                    label=\"打卡备注\"\r\n                    width=\"120\">\r\n            </el-table-column>\r\n            <!--<el-table-column-->\r\n                    <!--fixed=\"right\"-->\r\n                    <!--label=\"操作\">-->\r\n                <!--<template slot-scope=\"scope\">-->\r\n                    <!--<el-button @click=\"edit(scope.row)\" type=\"primary\" icon=\"el-icon-edit\" circle></el-button>-->\r\n                    <!--<el-button @click=\"delete(scope.row)\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>-->\r\n                <!--</template>-->\r\n            <!--</el-table-column>-->\r\n        </el-table>\r\n        <el-pagination\r\n                background\r\n                :current-page.sync=\"curPage\"\r\n                :hide-on-single-page=\"value\"\r\n                :page-size=\"pageSize\"\r\n                layout=\"total, prev, pager, next, jumper\"\r\n                :total=\"Sign.length\"\r\n                style=\"margin-top:20px;\">\r\n        </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {getAllSign} from '@/api/sign'\r\n    import {timeFormat} from '@/utils/timeFormat'\r\n    export default {\r\n        name: \"SignManage\",\r\n        created() {\r\n            if (this.$store.state.number.length != 0) {\r\n                if (this.$store.state.role.name === 'admin') {\r\n                }else {\r\n                    this.$router.push({path: '/'})\r\n                }\r\n            }else {\r\n                this.$router.push({path: '/'})\r\n            };\r\n            this.getSign()\r\n        },\r\n        data() {\r\n            return {\r\n                value: true,\r\n                pageSize:5,\r\n                curPage:1,\r\n                page:0,\r\n                size:5,\r\n                Sign: [],\r\n                json_fields: {\r\n                    \"ID\": \"id\",\r\n                    \"姓名\": \"user.name\",\r\n                    \"账号\": \"user.number\",\r\n                    \"班级\": \"user.clbum.name\",\r\n                    \"签到时间\": \"signtime\",\r\n                    \"打卡备注\": \"remark\"\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            getSign() {\r\n                let that = this\r\n                getAllSign().then(data => {\r\n                    that.Sign = data.data\r\n                    for(let i=0; i<that.Sign.length; i++){\r\n                        that.Sign[i].signtime = timeFormat(that.Sign[i].signtime)\r\n                    }\r\n                }).catch(error => {\r\n                    if (error !== 'error') {\r\n                        that.$message({type: 'error', message: '签到信息加载失败!', showClose: true})\r\n                    }\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SignManage.vue?vue&type=template&id=4c4a5e0c&scoped=true&\"\nimport script from \"./SignManage.vue?vue&type=script&lang=js&\"\nexport * from \"./SignManage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c4a5e0c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}