(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["clbummanage"],{fccf:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ClbumManage"},[a("download-excel",{staticClass:"export-excel-wrapper",staticStyle:{width:"100px",height:"40px",margin:"15px 15px 15px 0px",float:"left"},attrs:{data:e.Clbum,fields:e.json_fields,name:"班级详情.xls"}},[a("el-button",{staticStyle:{width:"100px",height:"40px"},attrs:{type:"primary",size:"small"}},[e._v("导出EXCEL")])],1),a("el-button",{staticStyle:{margin:"15px 15px 15px 0px"},attrs:{type:"success"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加")]),a("el-input",{staticStyle:{width:"300px",margin:"15px 15px 15px 0px"},attrs:{placeholder:"输入关键词搜索班级..."},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.findlink()}},slot:"append"})],1),a("el-table",{staticStyle:{width:"400px"},attrs:{data:e.Clbum.slice((e.curPage-1)*e.pageSize,e.curPage*e.pageSize),border:""}},[a("el-table-column",{attrs:{prop:"id",label:"班级编号",width:"100"}}),a("el-table-column",{attrs:{prop:"name",label:"班级名称",width:"120"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.edit(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteclbum(t.row)}}})]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":e.curPage,"page-size":e.pageSize,"hide-on-single-page":e.value,layout:"total, prev, pager, next, jumper",total:e.Clbum.length},on:{"update:currentPage":function(t){e.curPage=t},"update:current-page":function(t){e.curPage=t}}}),a("el-dialog",{attrs:{title:"添加班级",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"班级名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addclbum()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改班级",visible:e.dialogForm},on:{"update:visible":function(t){e.dialogForm=t}}},[a("el-form",{attrs:{model:e.clbumform}},[a("el-form-item",{attrs:{label:"班级名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.clbumform.name,callback:function(t){e.$set(e.clbumform,"name",t)},expression:"clbumform.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogForm=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.editclbum("clbumform")}}},[e._v("确 定")])],1)],1)],1)},n=[],i=(a("b0c0"),a("99af"),a("8daa"));function l(){return Object(i["a"])({url:"/clbum",method:"get"})}function r(e){var t={name:e};return Object(i["a"])({url:"clbum/findByNameLike",method:"post",data:t})}function s(e){var t={name:e};return Object(i["a"])({url:"clbum/create",method:"post",data:t})}function c(e,t){var a={id:e,name:t};return Object(i["a"])({url:"clbum/update",method:"Put",data:a})}function u(e){return Object(i["a"])({url:"clbum/delete/".concat(e),method:"get"})}var m={name:"ClbumManage",created:function(){0!=this.$store.state.number.length&&"admin"===this.$store.state.role.name||this.$router.push({path:"/"}),this.getClbum()},data:function(){return{input:"",value:!0,curPage:1,pageSize:5,page:0,Clbum:[],json_meta:[[{" key ":" charset "," value ":" utf- 8 "}]],json_fields:{ID:"id","班级名称":"name"},dialogFormVisible:!1,dialogForm:!1,form:{name:""},clbumform:{id:"",name:""}}},methods:{getClbum:function(){var e=this;l().then((function(t){e.Clbum=t.data})).catch((function(t){"error"!==t&&e.$message({type:"error",message:"班级信息加载失败!",showClose:!0})}))},findlink:function(){var e=this;r(this.input).then((function(t){e.Clbum=t.data})).catch((function(t){"error"!==t&&e.$message({type:"error",message:"特定班级信息查询失败!",showClose:!0})}))},addclbum:function(){var e=this;s(this.form.name).then((function(t){e.$message({type:"success",message:"添加班级成功!",showClose:!0}),window.location.reload()})).catch((function(t){"error"!==t&&e.$message({type:"error",message:"添加班级失败!",showClose:!0})})),this.dialogFormVisible=!1},edit:function(e){this.dialogForm=!0,this.clbumform.id=e.id,this.clbumform.name=e.name},editclbum:function(){var e=this;c(this.clbumform.id,this.clbumform.name).then((function(t){e.$message({type:"success",message:"修改班级成功!",showClose:!0}),window.location.reload()})).catch((function(t){"error"!==t&&e.$message({type:"error",message:"修改班级失败!",showClose:!0})}))},deleteclbum:function(e){var t=this,a=this;this.$confirm("此操作将永久删除该班级, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(e.id).then((function(e){a.$message({type:"success",message:"班级删除成功!",showClose:!0}),window.location.reload()})).catch((function(e){"error"!==e&&a.$message({type:"error",message:"班级删除失败!",showClose:!0})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},d=m,p=a("2877"),f=Object(p["a"])(d,o,n,!1,null,"9a01b350",null);t["default"]=f.exports}}]);
//# sourceMappingURL=clbummanage.0ac2d3c2.js.map