(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["rolemanage"],{"0513":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"RoleManage"},[o("el-button",{staticStyle:{margin:"15px 15px 15px 0px"},attrs:{type:"success"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加")]),o("el-table",{staticStyle:{width:"400px"},attrs:{data:e.Roles,border:""}},[o("el-table-column",{attrs:{prop:"id",label:"权限编号",width:"100"}}),o("el-table-column",{attrs:{prop:"name",label:"权限名称",width:"120"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(o){return e.edit(t.row)}}}),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(o){return e.deleterole(t.row)}}})]}}])})],1),o("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","hide-on-single-page":e.value,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.size,"current-change":e.contentpage}}),o("el-dialog",{attrs:{title:"添加权限",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"权限名称"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addrole()}}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"修改权限",visible:e.dialogForm},on:{"update:visible":function(t){e.dialogForm=t}}},[o("el-form",{attrs:{model:e.roleform}},[o("el-form-item",{attrs:{label:"权限名称"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.roleform.name,callback:function(t){e.$set(e.roleform,"name",t)},expression:"roleform.name"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogForm=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.editrole("roleform")}}},[e._v("确 定")])],1)],1)],1)},n=[],r=(o("b0c0"),o("99af"),o("8daa"));function i(e,t){return Object(r["a"])({url:"role/findAll/".concat(e,"/").concat(t),method:"get"})}function l(e){var t={name:e};return Object(r["a"])({url:"role/create",method:"post",data:t})}function s(e,t){var o={id:e,name:t};return Object(r["a"])({url:"role/update",method:"Put",data:o})}function c(e){return Object(r["a"])({url:"role/delete/".concat(e),method:"get"})}var m={name:"RoleManage",created:function(){0!=this.$store.state.number.length&&"admin"===this.$store.state.role.name||this.$router.push({path:"/"}),this.getRole()},data:function(){return{value:!0,pageSize:0,total:0,page:0,size:5,Roles:[],dialogFormVisible:!1,dialogForm:!1,form:{name:""},roleform:{id:"",name:""}}},methods:{getRole:function(){var e=this;i(this.page,this.size).then((function(t){e.Roles=t.data.content,e.pageSize=t.data.size,e.total=t.data.totalElements})).catch((function(t){"error"!==t&&e.$message({type:"error",message:"权限信息加载失败!",showClose:!0})}))},contentpage:function(e){var t=this;i(e-1,this.size).then((function(e){t.Roles=e.data.content,t.pageSize=e.data.size,t.total=e.data.totalElements})).catch((function(e){"error"!==e&&t.$message({type:"error",message:"权限信息加载失败!",showClose:!0})}))},addrole:function(){var e=this;l(this.form.name).then((function(t){e.$message({type:"success",message:"添加权限成功!",showClose:!0}),window.location.reload()})).catch((function(t){"error"!==t&&e.$message({type:"error",message:"添加权限失败!",showClose:!0})})),this.dialogFormVisible=!1},edit:function(e){this.dialogForm=!0,this.roleform.id=e.id,this.roleform.name=e.name},editrole:function(){var e=this;s(this.roleform.id,this.roleform.name).then((function(t){e.$message({type:"success",message:"修改权限成功!",showClose:!0}),window.location.reload()})).catch((function(t){"error"!==t&&e.$message({type:"error",message:"修改权限失败!",showClose:!0})}))},deleterole:function(e){var t=this,o=this;this.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c(e.id).then((function(e){o.$message({type:"success",message:"权限删除成功!",showClose:!0}),window.location.reload()})).catch((function(e){"error"!==e&&o.$message({type:"error",message:"权限删除失败!",showClose:!0})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},u=m,d=o("2877"),f=Object(d["a"])(u,a,n,!1,null,"7fa15528",null);t["default"]=f.exports}}]);
//# sourceMappingURL=rolemanage.ba4b0746.js.map