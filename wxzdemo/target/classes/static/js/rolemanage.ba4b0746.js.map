{"version":3,"sources":["webpack:///./src/views/Role/RoleManage.vue?44d5","webpack:///./src/api/role.js","webpack:///src/views/Role/RoleManage.vue","webpack:///./src/views/Role/RoleManage.vue?92f7","webpack:///./src/views/Role/RoleManage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","on","$event","dialogFormVisible","_v","Roles","scopedSlots","_u","key","fn","scope","edit","row","deleterole","value","pageSize","total","size","contentpage","form","model","callback","$$v","$set","expression","slot","addrole","dialogForm","roleform","nativeOn","preventDefault","editrole","staticRenderFns","rolepage","page","request","url","method","saveRole","name","data","update","id","component"],"mappings":"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","file":"js/rolemanage.ba4b0746.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"RoleManage\"},[_c('el-button',{staticStyle:{\"margin\":\"15px 15px 15px 0px\"},attrs:{\"type\":\"success\"},on:{\"click\":function($event){_vm.dialogFormVisible = true}}},[_vm._v(\"添加\")]),_c('el-table',{staticStyle:{\"width\":\"400px\"},attrs:{\"data\":_vm.Roles,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"权限编号\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"权限名称\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.edit(scope.row)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleterole(scope.row)}}})]}}])})],1),_c('el-pagination',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"background\":\"\",\"hide-on-single-page\":_vm.value,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.size,\"current-change\":_vm.contentpage}}),_c('el-dialog',{attrs:{\"title\":\"添加权限\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"权限名称\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addrole()}}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改权限\",\"visible\":_vm.dialogForm},on:{\"update:visible\":function($event){_vm.dialogForm=$event}}},[_c('el-form',{attrs:{\"model\":_vm.roleform}},[_c('el-form-item',{attrs:{\"label\":\"权限名称\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.roleform.name),callback:function ($$v) {_vm.$set(_vm.roleform, \"name\", $$v)},expression:\"roleform.name\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogForm = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.editrole('roleform')}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/request'\r\n\r\nexport function rolepage(page,size) {\r\n    return request({\r\n        url: `role/findAll/${page}/${size}`,\r\n        method: 'get'\r\n    })\r\n}\r\n\r\nexport function saveRole(name) {\r\n    const data = {\r\n        name\r\n    }\r\n    return request({\r\n        url: 'role/create',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\nexport function update(id,name) {\r\n    const data = {\r\n        id,\r\n        name\r\n    }\r\n    return request({\r\n        url: 'role/update',\r\n        method: 'Put',\r\n        data\r\n    })\r\n}\r\n\r\nexport function deleterole(id) {\r\n    return request({\r\n        url: `role/delete/${id}`,\r\n        method: 'get'\r\n    })\r\n}","<template>\r\n    <div class=\"RoleManage\">\r\n        <el-button type=\"success\"\r\n                   style=\"margin:15px 15px 15px 0px;\"\r\n                   @click=\"dialogFormVisible = true\">添加</el-button>\r\n        <el-table\r\n                :data=\"Roles\"\r\n                border\r\n                style=\"width: 400px;\">\r\n            <el-table-column\r\n                    prop=\"id\"\r\n                    label=\"权限编号\"\r\n                    width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"name\"\r\n                    label=\"权限名称\"\r\n                    width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    fixed=\"right\"\r\n                    label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button @click=\"edit(scope.row)\" type=\"primary\" icon=\"el-icon-edit\" circle></el-button>\r\n                    <el-button @click=\"deleterole(scope.row)\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n                background\r\n                @size-change=\"size\"\r\n                @current-change=\"contentpage\"\r\n                :hide-on-single-page=\"value\"\r\n                :page-size=\"pageSize\"\r\n                layout=\"total, prev, pager, next, jumper\"\r\n                :total=\"total\"\r\n                style=\"margin-top:20px;\">\r\n        </el-pagination>\r\n        <el-dialog title=\"添加权限\" :visible.sync=\"dialogFormVisible\">\r\n            <el-form :model=\"form\">\r\n                <el-form-item label=\"权限名称\">\r\n                    <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"addrole()\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n        <el-dialog title=\"修改权限\" :visible.sync=\"dialogForm\">\r\n            <el-form :model=\"roleform\">\r\n                <el-form-item label=\"权限名称\">\r\n                    <el-input v-model=\"roleform.name\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogForm = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click.native.prevent=\"editrole('roleform')\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import {rolepage,saveRole,update,deleterole} from '@/api/role'\r\n\r\n    export default {\r\n        name: \"RoleManage\",\r\n        created() {\r\n            if (this.$store.state.number.length != 0) {\r\n                if (this.$store.state.role.name === 'admin') {\r\n                }else {\r\n                    this.$router.push({path: '/'})\r\n                }\r\n            }else {\r\n                this.$router.push({path: '/'})\r\n            };\r\n            this.getRole()\r\n        },\r\n        data() {\r\n            return {\r\n                value: true,\r\n                pageSize:0,\r\n                total:0,\r\n                page:0,\r\n                size:5,\r\n                Roles: [],\r\n                dialogFormVisible: false,\r\n                dialogForm: false,\r\n                form: {\r\n                    name: ''\r\n                },\r\n                roleform:{\r\n                    id:'',\r\n                    name:''\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            getRole() {\r\n                let that = this\r\n                rolepage(this.page,this.size).then(data => {\r\n                    that.Roles = data.data.content\r\n                    that.pageSize = data.data.size\r\n                    that.total = data.data.totalElements\r\n                }).catch(error => {\r\n                    if (error !== 'error') {\r\n                        that.$message({type: 'error', message: '权限信息加载失败!', showClose: true})\r\n                    }\r\n                })\r\n            },\r\n            contentpage(currentPage){\r\n                let that=this;\r\n                rolepage(currentPage-1,this.size).then(data => {\r\n                    that.Roles = data.data.content\r\n                    that.pageSize = data.data.size\r\n                    that.total = data.data.totalElements\r\n                }).catch(error => {\r\n                    if (error !== 'error') {\r\n                        that.$message({type: 'error', message: '权限信息加载失败!', showClose: true})\r\n                    }\r\n                })\r\n            },\r\n            addrole(){\r\n                let that = this\r\n                saveRole(this.form.name).then(data => {\r\n                    that.$message({type: 'success', message: '添加权限成功!', showClose: true})\r\n                    window.location.reload()\r\n                }).catch(error => {\r\n                    if (error !== 'error') {\r\n                        that.$message({type: 'error', message: '添加权限失败!', showClose: true})\r\n                    }\r\n                })\r\n                this.dialogFormVisible = false;\r\n            },\r\n            edit(row){\r\n                this.dialogForm = true,\r\n                    this.roleform.id = row.id,\r\n                    this.roleform.name = row.name\r\n            },\r\n            editrole(){\r\n                let that = this\r\n                update(this.roleform.id,this.roleform.name).then(data => {\r\n                    that.$message({type: 'success', message: '修改权限成功!', showClose: true})\r\n                    window.location.reload()\r\n                }).catch(error => {\r\n                    if (error !== 'error') {\r\n                        that.$message({type: 'error', message: '修改权限失败!', showClose: true})\r\n                    }\r\n                })\r\n            },\r\n            deleterole(row){\r\n                let that = this\r\n                this.$confirm('此操作将永久删除该权限, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    deleterole(row.id).then(data => {\r\n                        that.$message({type: 'success', message: '权限删除成功!', showClose: true})\r\n                        window.location.reload()\r\n                    }).catch(error => {\r\n                        if (error !== 'error') {\r\n                            that.$message({type: 'error', message: '权限删除失败!', showClose: true})\r\n                        }\r\n                    })\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消删除'\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoleManage.vue?vue&type=template&id=7fa15528&scoped=true&\"\nimport script from \"./RoleManage.vue?vue&type=script&lang=js&\"\nexport * from \"./RoleManage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7fa15528\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}